<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infograf√≠a: Dominando FHIR con FSH y SUSHI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
            color: #212529;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .flowchart {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }
        .flowchart-item {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            width: 80%;
            max-width: 400px;
            min-height: 80px;
        }
        .flowchart-arrow {
            font-size: 2.5rem;
            font-weight: 900;
            color: #0D6EFD;
            transform: rotate(90deg);
        }
        @media (min-width: 1024px) {
            .flowchart {
                flex-direction: row;
                justify-content: center;
                gap: 0;
            }
            .flowchart-item {
                width: 22%;
                min-height: 120px;
            }
            .flowchart-arrow {
                transform: rotate(0deg);
                margin: 0 -1rem;
            }
        }
        .stat-number {
            font-size: 6rem;
            font-weight: 900;
            line-height: 1;
            color: #0D6EFD;
        }
        .gradient-text {
            background: linear-gradient(90deg, #0D6EFD, #0A58CA);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-16">
            <h1 class="text-4xl md:text-6xl font-black mb-4 gradient-text">Dominando FHIR con FSH y SUSHI</h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">Una gu√≠a visual e interactiva para acelerar la creaci√≥n de Gu√≠as de Implementaci√≥n (IG) de FHIR utilizando FHIR Shorthand (FSH) y el compilador SUSHI.</p>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

            <section class="card md:col-span-2 lg:col-span-3">
                <h2 class="text-2xl font-bold mb-4 text-center">¬øQu√© es una Gu√≠a de Implementaci√≥n (IG) de FHIR?</h2>
                <p class="text-center text-gray-700 mb-6">Una IG es un conjunto de documentaci√≥n y artefactos que especifica c√≥mo se utiliza FHIR para resolver un problema de interoperabilidad concreto. Es la receta para implementar un caso de uso espec√≠fico.</p>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-center">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <div class="text-4xl mb-2">üìÑ</div>
                        <h3 class="font-semibold text-blue-800">Contenido Narrativo</h3>
                        <p class="text-sm text-blue-700">Explicaciones y gu√≠as en lenguaje humano.</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <div class="text-4xl mb-2">‚öôÔ∏è</div>
                        <h3 class="font-semibold text-green-800">Definiciones Formales</h3>
                        <p class="text-sm text-green-700">Recursos de conformidad como perfiles y extensiones.</p>
                    </div>
                    <div class="bg-yellow-50 p-4 rounded-lg">
                        <div class="text-4xl mb-2">üí°</div>
                        <h3 class="font-semibold text-yellow-800">Ejemplos Pr√°cticos</h3>
                        <p class="text-sm text-yellow-700">Instancias de recursos que ilustran el uso.</p>
                    </div>
                </div>
            </section>

            <section class="card lg:col-span-2">
                <h2 class="text-2xl font-bold mb-4">Presentando FHIR Shorthand (FSH)</h2>
                <p class="text-gray-700 mb-4">FSH es un lenguaje dise√±ado por y para humanos para definir perfiles de FHIR de forma legible y compacta. Su objetivo es simplificar dr√°sticamente la creaci√≥n de IGs.</p>
                <ul class="space-y-3">
                    <li class="flex items-start"><span class="text-blue-500 font-bold mr-2">‚úì</span><div><strong class="text-gray-800">Conciso y Comprensible:</strong> La intenci√≥n del autor es clara, facilitando la revisi√≥n y colaboraci√≥n.</div></li>
                    <li class="flex items-start"><span class="text-blue-500 font-bold mr-2">‚úì</span><div><strong class="text-gray-800">Ideal para Colaboraci√≥n:</strong> Funciona perfectamente con sistemas de control de versiones como Git, permitiendo fusiones y resoluci√≥n de conflictos.</div></li>
                    <li class="flex items-start"><span class="text-blue-500 font-bold mr-2">‚úì</span><div><strong class="text-gray-800">Est√°ndar Abierto:</strong> Es un est√°ndar oficial de HL7, gratuito y de c√≥digo abierto.</div></li>
                </ul>
            </section>
            
            <section class="card">
                <h2 class="text-2xl font-bold mb-4 text-center">FSH vs. JSON</h2>
                <p class="text-gray-700 text-center mb-4">FSH reduce dr√°sticamente la verbosidad en comparaci√≥n con la definici√≥n directa en JSON (StructureDefinition).</p>
                <div class="chart-container h-48 md:h-56">
                    <canvas id="fshVsJsonChart"></canvas>
                </div>
            </section>

            <section class="card md:col-span-2 lg:col-span-3">
                <h2 class="text-2xl font-bold mb-4 text-center">Flujo de Trabajo: De FSH a una IG Publicada</h2>
                <p class="text-center text-gray-700 mb-8">El proceso para crear una IG con este ecosistema es directo y automatizado. Comienza con archivos de texto legibles y termina con una gu√≠a web completa.</p>
                <div class="flowchart">
                    <div class="flowchart-item bg-blue-100 text-blue-900">
                        <div class="font-bold">1. Archivos FSH</div>
                        <div class="text-sm mt-1">Se escriben las definiciones de perfiles y recursos en archivos `.fsh`.</div>
                    </div>
                    <div class="flowchart-arrow">¬ª</div>
                    <div class="flowchart-item bg-purple-100 text-purple-900">
                        <div class="font-bold">2. Compilador SUSHI</div>
                        <div class="text-sm mt-1">SUSHI transforma el FSH en recursos de conformidad FHIR (JSON).</div>
                    </div>
                    <div class="flowchart-arrow">¬ª</div>
                    <div class="flowchart-item bg-green-100 text-green-900">
                        <div class="font-bold">3. Publicador de IG</div>
                        <div class="text-sm mt-1">Toma los JSON y el contenido narrativo para generar la gu√≠a web HTML.</div>
                    </div>
                    <div class="flowchart-arrow">¬ª</div>
                    <div class="flowchart-item bg-yellow-100 text-yellow-900">
                        <div class="font-bold">4. Gu√≠a de Implementaci√≥n</div>
                        <div class="text-sm mt-1">El resultado final: un sitio web navegable y listo para usar.</div>
                    </div>
                </div>
            </section>

            <section class="card text-center">
                <h2 class="text-2xl font-bold mb-2">Adopci√≥n Global</h2>
                <p class="text-gray-700 mb-4">FSH se ha convertido en el est√°ndar de facto para la creaci√≥n seria de perfiles FHIR.</p>
                <div class="stat-number">462+</div>
                <p class="text-lg font-semibold text-gray-800">IGs de FHIR "registradas" utilizan FSH/SUSHI.</p>
                <a href="https://fshschool.org/fsh-finder/" target="_blank" class="text-sm text-blue-600 hover:underline mt-2 inline-block">Explorar IGs</a>
            </section>

            <section class="card lg:col-span-2">
                 <h2 class="text-2xl font-bold mb-4">Anatom√≠a de un √çtem FSH</h2>
                <p class="text-gray-700 mb-6">Cada definici√≥n en FSH es un "√≠tem". Todos los √≠tems siguen una estructura simple y consistente, compuesta por tres partes principales.</p>
                <div class="space-y-4">
                    <div class="p-4 border-l-4 border-blue-500 bg-blue-50">
                        <h3 class="font-bold text-lg text-blue-800">Declaraci√≥n</h3>
                        <p class="text-blue-700">La primera l√≠nea. Define el tipo de √≠tem y su nombre. <br><code class="text-sm bg-blue-200 rounded px-1 py-0.5">Profile: MiPerfilDePaciente</code></p>
                    </div>
                    <div class="p-4 border-l-4 border-green-500 bg-green-50">
                        <h3 class="font-bold text-lg text-green-800">Palabras Clave</h3>
                        <p class="text-green-700">Metadatos que describen el √≠tem, como su `Parent` (padre), `Id`, `Title` y `Description`.<br><code class="text-sm bg-green-200 rounded px-1 py-0.5">Parent: Patient</code></p>
                    </div>
                    <div class="p-4 border-l-4 border-purple-500 bg-purple-50">
                        <h3 class="font-bold text-lg text-purple-800">Reglas</h3>
                        <p class="text-purple-700">El coraz√≥n de la definici√≥n. Son las restricciones y modificaciones aplicadas al recurso base. Todas las reglas comienzan con un asterisco (`*`).<br><code class="text-sm bg-purple-200 rounded px-1 py-0.5">* name 1..* MS</code></p>
                    </div>
                </div>
            </section>
            
            <section class="card md:col-span-2 lg:col-span-3">
                <h2 class="text-2xl font-bold mb-4 text-center">Tipos de Reglas Fundamentales en FSH</h2>
                <p class="text-center text-gray-700 mb-6">Las reglas definen las restricciones. Aunque hay 8 tipos, estas son las m√°s comunes y poderosas para empezar.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="border p-4 rounded-lg bg-gray-50">
                        <h3 class="font-bold text-gray-800">Reglas de Cardinalidad</h3>
                        <p class="text-sm text-gray-600 mb-2">Definen cu√°ntas veces puede aparecer un elemento. `0..0` lo proh√≠be, `1..1` lo hace obligatorio.</p>
                        <code class="block text-xs bg-gray-200 p-2 rounded">* birthDate 1..1</code>
                    </div>
                    <div class="border p-4 rounded-lg bg-gray-50">
                        <h3 class="font-bold text-gray-800">Reglas de Asignaci√≥n (=)</h3>
                        <p class="text-sm text-gray-600 mb-2">Fijan un valor espec√≠fico para un elemento. Ideal para c√≥digos fijos.</p>
                        <code class="block text-xs bg-gray-200 p-2 rounded">* status = #active</code>
                    </div>
                    <div class="border p-4 rounded-lg bg-gray-50">
                        <h3 class="font-bold text-gray-800">Reglas de Tipo (only)</h3>
                        <p class="text-sm text-gray-600 mb-2">Restringen los tipos de datos permitidos para un elemento de elecci√≥n (choice `[x]`) o una referencia.</p>
                        <code class="block text-xs bg-gray-200 p-2 rounded">* subject only Reference(MiPerfilPaciente)</code>
                    </div>
                    <div class="border p-4 rounded-lg bg-gray-50">
                        <h3 class="font-bold text-gray-800">Reglas de Enlace (from)</h3>
                        <p class="text-sm text-gray-600 mb-2">Asocian un elemento codificable a un `ValueSet` (conjunto de valores) espec√≠fico.</p>
                        <code class="block text-xs bg-gray-200 p-2 rounded">* gender from MiValueSetDeGenero (required)</code>
                    </div>
                </div>
            </section>
            
            <section class="card text-center md:col-span-2 lg:col-span-3">
                <h2 class="text-2xl font-bold mb-4">Recursos y Herramientas Esenciales</h2>
                <p class="text-gray-700 mb-6">Sum√©rgete en el ecosistema de FSH con estas herramientas y gu√≠as oficiales.</p>
                 <div class="flex flex-wrap justify-center gap-4">
                    <a href="https://fshschool.org/" target="_blank" class="bg-blue-600 text-white font-bold py-2 px-4 rounded-full hover:bg-blue-700 transition-colors">Escuela de FSH</a>
                    <a href="http://hl7.org/fhir/uv/shorthand/" target="_blank" class="bg-green-600 text-white font-bold py-2 px-4 rounded-full hover:bg-green-700 transition-colors">Especificaci√≥n del Lenguaje</a>
                    <a href="https://fshschool.org/docs/sushi/" target="_blank" class="bg-purple-600 text-white font-bold py-2 px-4 rounded-full hover:bg-purple-700 transition-colors">Documentaci√≥n de SUSHI</a>
                    <a href="https://fshschool.org/FSHOnline/" target="_blank" class="bg-yellow-500 text-white font-bold py-2 px-4 rounded-full hover:bg-yellow-600 transition-colors">FSH Online (Playground)</a>
                </div>
            </section>

        </main>
    </div>

    <script>
        const wrapLabel = (label, maxLength = 16) => {
            if (typeof label !== 'string' || label.length <= maxLength) {
                return label;
            }
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + ' ' + word).length > maxLength && currentLine.length > 0) {
                    lines.push(currentLine);
                    currentLine = word;
                } else {
                    currentLine = currentLine ? currentLine + ' ' + word : word;
                }
            }
            lines.push(currentLine);
            return lines;
        };
        
        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
              return label.join(' ');
            }
            return label;
        };

        const fshVsJsonData = {
            labels: [wrapLabel('FSH (L√≠neas)'), wrapLabel('JSON StructureDefinition (L√≠neas)')],
            datasets: [{
                label: 'Comparaci√≥n de Verbosidad',
                data: [50, 1500],
                backgroundColor: ['#0D6EFD', '#6C757D'],
                borderColor: ['#0A58CA', '#5A6268'],
                borderWidth: 1,
                barPercentage: 0.6,
                categoryPercentage: 0.7
            }]
        };

        const fshVsJsonConfig = {
            type: 'bar',
            data: fshVsJsonData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'N√∫mero aproximado de l√≠neas de c√≥digo'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                           title: tooltipTitleCallback
                        }
                    }
                }
            }
        };

        new Chart(
            document.getElementById('fshVsJsonChart'),
            fshVsJsonConfig
        );
    </script>
</body>
</html>
