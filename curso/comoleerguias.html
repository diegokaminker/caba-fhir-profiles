<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infograf√≠a: Entendiendo las Gu√≠as de Implementaci√≥n (IG) de FHIR</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            margin: auto;
            height: 320px;
            width: 100%;
            max-width: 600px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .flow-step {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .flow-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-blue-600 mb-2">Descifrando las Gu√≠as de Implementaci√≥n (IG) de FHIR</h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">Una gu√≠a visual para entender los componentes clave que hacen posible la interoperabilidad en salud.</p>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

            <div class="lg:col-span-3 bg-white rounded-xl shadow-lg p-6 md:p-8 flex flex-col md:flex-row items-center">
                <div class="text-center md:text-left md:mr-8 mb-6 md:mb-0">
                    <h2 class="text-2xl font-bold text-blue-700 mb-3">¬øPor Qu√© son Esenciales las Gu√≠as de Implementaci√≥n?</h2>
                    <p class="text-gray-600 leading-relaxed">La especificaci√≥n base de FHIR es un est√°ndar poderoso, pero intencionalmente flexible y no cubre todos los detalles para cada caso de uso. Las Gu√≠as de Implementaci√≥n (IG) son el puente necesario: proporcionan las <span class="font-semibold text-blue-600">reglas y restricciones espec√≠ficas</span> para un contexto determinado (un pa√≠s, una especialidad m√©dica, etc.), asegurando que los datos sean consistentes y verdaderamente interoperables.</p>
                </div>
                <div class="flex-shrink-0 bg-blue-50 border-4 border-blue-200 rounded-full w-48 h-48 flex flex-col items-center justify-center text-center p-4">
                     <span class="text-6xl font-bold text-blue-600">100%</span>
                     <span class="text-sm font-semibold text-blue-800 mt-2">Necesarias para la Interoperabilidad Real</span>
                </div>
            </div>

            <div class="md:col-span-2 lg:col-span-2 bg-white rounded-xl shadow-lg p-6 md:p-8">
                <h2 class="text-2xl font-bold text-blue-700 mb-4 text-center">Tipos Clave de Gu√≠as de Implementaci√≥n</h2>
                <p class="text-center text-gray-600 mb-6">Las IGs se adaptan a diferentes necesidades, desde regulaciones nacionales hasta acuerdos espec√≠ficos de una comunidad. Este gr√°fico compara su alcance y enfoque general.</p>
                <div class="chart-container">
                    <canvas id="igTypesChart"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
                <h2 class="text-2xl font-bold text-blue-700 mb-4 text-center">Anatom√≠a de una IG</h2>
                <p class="text-center text-gray-600 mb-6">Toda IG efectiva equilibra dos componentes: instrucciones para las m√°quinas e instrucciones para las personas.</p>
                <div class="chart-container">
                    <canvas id="igAnatomyChart"></canvas>
                </div>
            </div>

            <div class="lg:col-span-3 bg-white rounded-xl shadow-lg p-6 md:p-8">
                <h2 class="text-2xl font-bold text-blue-700 mb-6 text-center">Los Bloques de Construcci√≥n: Artefactos Computables</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg">
                        <h3 class="font-bold text-xl text-blue-800 mb-2">üë§ Perfiles (Profiles)</h3>
                        <p class="text-gray-700">Son la herramienta principal para a√±adir reglas a los recursos base de FHIR. Definen qu√© elementos de un recurso son obligatorios, qu√© sistemas de c√≥digos usar para un campo espec√≠fico (terminolog√≠a), y a√±aden extensiones para conceptos que no existen en la especificaci√≥n base.</p>
                    </div>
                    <div class="bg-teal-50 border-l-4 border-teal-500 p-6 rounded-lg">
                        <h3 class="font-bold text-xl text-teal-800 mb-2">üìö Terminolog√≠a (Terminology)</h3>
                        <p class="text-gray-700">Garantiza que todos usen el mismo vocabulario. Esto incluye <span class="font-semibold">Sistemas de C√≥digos</span> (como CIE-10 o SNOMED CT) y <span class="font-semibold">Conjuntos de Valores (Value Sets)</span>, que son subconjuntos de c√≥digos seleccionados para un prop√≥sito espec√≠fico, como una lista de diagn√≥sticos permitidos.</p>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-3 bg-white rounded-xl shadow-lg p-6 md:p-8">
                <h2 class="text-2xl font-bold text-blue-700 mb-6 text-center">¬øC√≥mo Leer una IG de Manera Efectiva?</h2>
                <p class="text-center text-gray-600 mb-8">Seguir un orden l√≥gico es clave para no perderse en los detalles t√©cnicos. Este flujo de trabajo es el m√°s recomendado.</p>
                <div class="flex flex-col md:flex-row justify-center items-center md:items-stretch space-y-4 md:space-y-0 md:space-x-4">
                    <div class="flow-step bg-white border-2 border-gray-200 rounded-lg p-6 text-center w-64">
                        <div class="text-4xl mb-3">1Ô∏è‚É£</div>
                        <h3 class="font-bold text-lg text-blue-700">Leer la Narrativa</h3>
                        <p class="text-sm text-gray-600 mt-2">Comienza aqu√≠. Entiende el problema que la IG resuelve, los actores involucrados y los casos de uso principales.</p>
                    </div>
                    <div class="text-4xl text-blue-400 self-center mx-4 transform rotate-90 md:rotate-0">‚ûî</div>
                     <div class="flow-step bg-white border-2 border-gray-200 rounded-lg p-6 text-center w-64">
                        <div class="text-4xl mb-3">2Ô∏è‚É£</div>
                        <h3 class="font-bold text-lg text-blue-700">Explorar Artefactos</h3>
                        <p class="text-sm text-gray-600 mt-2">Una vez que tienes el contexto, revisa los perfiles y otros artefactos computables para ver los detalles t√©cnicos.</p>
                    </div>
                    <div class="text-4xl text-blue-400 self-center mx-4 transform rotate-90 md:rotate-0">‚ûî</div>
                     <div class="flow-step bg-white border-2 border-gray-200 rounded-lg p-6 text-center w-64">
                        <div class="text-4xl mb-3">3Ô∏è‚É£</div>
                        <h3 class="font-bold text-lg text-blue-700">Consultar Ejemplos</h3>
                        <p class="text-sm text-gray-600 mt-2">Usa los ejemplos de instancias de recursos para ver la teor√≠a en pr√°ctica. Esto clarifica c√≥mo se deben estructurar los datos.</p>
                    </div>
                </div>
            </div>

        </main>
        
        <footer class="text-center mt-12 pt-6 border-t border-gray-200">
            <p class="text-sm text-gray-500">Infograf√≠a creada basada en el contenido de <a href="https://fshschool.github.io/courses/fsh-seminar/01-reading-an-ig.html" class="text-blue-500 hover:underline" target="_blank">FSH School - Reading an IG</a>.</p>
        </footer>

    </div>

    <script>
        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            }
            return label;
        };
        
        const commonChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        padding: 20,
                        font: {
                            size: 14
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    },
                    backgroundColor: '#1E40AF',
                    titleFont: { size: 16 },
                    bodyFont: { size: 14 },
                    padding: 12,
                    cornerRadius: 6
                }
            }
        };

        const wrapLabel = (label, maxLength = 16) => {
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            words.forEach(word => {
                if ((currentLine + ' ' + word).trim().length > maxLength) {
                    lines.push(currentLine.trim());
                    currentLine = word;
                } else {
                    currentLine = (currentLine + ' ' + word).trim();
                }
            });
            if (currentLine) {
                lines.push(currentLine.trim());
            }
            return lines;
        };

        const igTypesData = {
            labels: [
                'IG Nacionales Base', 
                'IG de Dominio de Conocimiento', 
                'IG de Comunidad de Implementaci√≥n', 
                'IG de Producto'
            ].map(label => wrapLabel(label)),
            datasets: [{
                label: 'Alcance / Complejidad General',
                data: [90, 75, 60, 40],
                backgroundColor: [
                    'rgba(59, 130, 246, 0.7)', // blue-500
                    'rgba(16, 185, 129, 0.7)', // emerald-500
                    'rgba(249, 115, 22, 0.7)', // orange-500
                    'rgba(234, 179, 8, 0.7)' // yellow-500
                ],
                borderColor: [
                    'rgba(59, 130, 246, 1)',
                    'rgba(16, 185, 129, 1)',
                    'rgba(249, 115, 22, 1)',
                    'rgba(234, 179, 8, 1)'
                ],
                borderWidth: 1,
                borderRadius: 4
            }]
        };

        const igTypesCtx = document.getElementById('igTypesChart').getContext('2d');
        new Chart(igTypesCtx, {
            type: 'bar',
            data: igTypesData,
            options: {
                ...commonChartOptions,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Nivel de Alcance Relativo',
                            font: { size: 14 }
                        }
                    },
                    x: {
                         ticks: {
                            font: { size: 12 }
                        }
                    }
                },
                plugins: {
                    ...commonChartOptions.plugins,
                     legend: { display: false }
                }
            }
        });

        const igAnatomyData = {
            labels: ['Reglas Computables', 'Narrativa Humana'],
            datasets: [{
                label: 'Composici√≥n',
                data: [50, 50],
                backgroundColor: [
                    'rgba(59, 130, 246, 0.8)',
                    'rgba(16, 185, 129, 0.8)'
                ],
                hoverOffset: 4
            }]
        };

        const igAnatomyCtx = document.getElementById('igAnatomyChart').getContext('2d');
        new Chart(igAnatomyCtx, {
            type: 'doughnut',
            data: igAnatomyData,
            options: {
                ...commonChartOptions,
                cutout: '60%'
            }
        });
    </script>

</body>
</html>
